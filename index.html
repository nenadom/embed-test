<!DOCTYPE html>
<html>
  <head>
    <style>
      .container {
        margin: auto;
        max-width: 800px;
        border: 1px dashed teal;
      }

      .flex-container {
        display: flex;
        border: 1px dashed magenta;
      }

      iframe {
        border: 1px dashed red;
      }
    </style>
  </head>
  <body>
    <h1>Embed still working</h1>
    <div class="container">
      <iframe
        id="sofa-standings-embed-177-34951"
        width="100%"
        height="493"
        src="http://localhost:3000/tournament/177/34951/standings/tables/embed"
        frameborder="0"
        scrolling="no"
        style="height: 493px !important"
      >
      </iframe>
      <script>
        (function (el) {
          console.log("handlemessage", el);
          window.addEventListener("message", (event) => {
            if (
              event.origin.includes("localhost") ||
              event.origin.startsWith("https://www.sofascore")
            ) {
              console.log("MESSAGE RECEIVED", event.data, el.id);
              if (el.id === event.data.id) {
                el.style.height = `${event.data.height}px`;
              }
            }
          });
        })(document.getElementById("sofa-standings-embed-177-34951"));
      </script>
      <div style="font-size: 12px; font-family: Arial, sans-serif">
        Standings provided by
        <a target="_blank" href="https://www.sofascore.com/"
          >SofaScore LiveScore</a
        >
      </div>
      <script
        type="text/javascript"
        src="https://www.sofascore.com/bundles/sofascoreweb/js/bin/util/embed.min.js"
      ></script>
    </div>

    <hr />

    <div class="container">
      <!-- <script>
        function resetIframeHeight(o) {
          o.style.height =
            o.contentWindow.document.documentElement.scrollHeight + "px";
        }
      </script>
      <iframe
        id="sofa-standings-embed-177-34951"
        width="100%"
        height="577"
        src="http://localhost:3000/tournament/177/34951/standings/tables/embed"
        frameborder="0"
        scrolling="no"
        style="height: 577px !important"
        onload="resetIframeHeight(this)"
      >
      </iframe>
      <div style="font-size: 12px; font-family: Arial, sans-serif">
        Standings provided by
        <a target="_blank" href="https://www.sofascore.com/"
          >SofaScore LiveScore</a
        >
      </div>
      <script
        type="text/javascript"
        src="https://www.sofascore.com/bundles/sofascoreweb/js/bin/util/embed.min.js"
      ></script>

      <script>
        function resetIframeHeight(o) {
          o.style.height =
            o.contentWindow.document.documentElement.scrollHeight + "px";
        }
      </script>
      <iframe
        id="sofa-standings-embed-53-29200"
        width="100%"
        height="605"
        src="http://localhost:3000/tournament/53/29200/standings/tables/embed"
        frameborder="0"
        scrolling="no"
        style="height: 605px !important"
        onload="resetIframeHeight(this)"
      >
      </iframe>
      <div style="font-size: 12px; font-family: Arial, sans-serif">
        Standings provided by
        <a target="_blank" href="https://www.sofascore.com/"
          >SofaScore LiveScore</a
        >
      </div>
      <script
        type="text/javascript"
        src="https://www.sofascore.com/bundles/sofascoreweb/js/bin/util/embed.min.js"
      ></script> -->

      <!-- <iframe
        id="sofa-standings-embed-4-17279"
        width="100%"
        height="437"
        src="http://localhost:3000/tournament/4/17279/standings/tables/embed"
        frameborder="0"
        scrolling="no"
        style="height: 437px !important"
        onload="resetIframeHeight(this)"
      >
      </iframe>
      <script>
        (function (el) {
          console.log("handlemessage", el);
          window.addEventListener("message", (event) => {
            if (
              event.origin.includes("localhost") ||
              event.origin.startsWith("https://www.sofascore")
            ) {
              console.log("MESSAGE RECEIVED", event.data);
              const height = +event.data;
              if (!isNaN(height)) {
                console.log("setting height...");
                el.style.height = height + "px";
              }
            }
          });
        })(document.getElementById("sofa-standings-embed-4-17279"));
      </script>
      <div style="font-size: 12px; font-family: Arial, sans-serif">
        Standings provided by
        <a target="_blank" href="https://www.sofascore.com/"
          >SofaScore LiveScore</a
        >
      </div>
      <script
        type="text/javascript"
        src="https://www.sofascore.com/bundles/sofascoreweb/js/bin/util/embed.min.js"
      ></script> -->
    </div>
  </body>
</html>
